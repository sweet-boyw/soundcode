{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/initState.js","../src/init.js","../src/index.js"],"sourcesContent":["export function observer(data) {\r\n    // 处理对象\r\n    if (typeof data != 'object' || data == null) {\r\n        return data;\r\n    }\r\n    return new Observer(data)\r\n}\r\nclass Observer {\r\n    constructor(value) {\r\n        this.walk(value)\r\n    }\r\n    walk(data) {\r\n        let keys = Object.keys(data)\r\n        for (let i = 0; i < keys.length; i++) {\r\n            let key = keys[i]\r\n            let value = data[key]\r\n            defineReactive(data, key, value)\r\n        }\r\n    }\r\n}\r\n// vue数据劫持方法\r\nfunction defineReactive(data, key, value) {\r\n    observer(value) // 深度劫持\r\n    Object.defineProperty(data, key, {\r\n        get() {\r\n            console.log(\"获取\")\r\n            return value\r\n        },\r\n        set(newValue, oldValue) {\r\n            console.log(\"设置\")\r\n            if (newValue === value) return\r\n            observer(newValue)\r\n            value = newValue\r\n        }\r\n    })\r\n}","import { observer } from \"./observe/index.js\"\r\n\r\nexport function initState(vm) {\r\n    let opts = vm.$options\r\n    // console.log(opts)\r\n    if (opts.props) {\r\n        initProps()\r\n    }\r\n    if (opts.data) {\r\n        initData(vm)\r\n    }\r\n    if (opts.watch) {\r\n        initWatch()\r\n    }\r\n    if (opts.computed) {\r\n        initComputed()\r\n    }\r\n    if (opts.methods) {\r\n        initMethods()\r\n    }\r\n}\r\n\r\n// 初始化props\r\nfunction initProps() {\r\n\r\n}\r\n\r\n// 初始化data\r\n/**\r\n * \r\n * @param {*} vm.data\r\n * （1） data是对象\r\n * （2） data是函数 \r\n */\r\nfunction initData(vm) {\r\n    // console.log(vm)\r\n    // console.log(\"初始化data\", vm.$options.data)\r\n    let data = vm.$options.data\r\n    data = vm._data = typeof data === \"function\" ? data.call(vm) : data\r\n    // 对数据进行劫持\r\n    observer(data)\r\n}\r\n\r\n// 初始化computed\r\nfunction initComputed() {\r\n\r\n}\r\n\r\n// 初始化watch\r\nfunction initWatch() {\r\n\r\n}\r\n\r\n// 初始化methods\r\nfunction initMethods() {\r\n\r\n}","import { initState } from \"./initState\"\r\n\r\nexport function initMixn(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        // console.log(options)\r\n        let vm = this\r\n        vm.$options = options\r\n        // 初始化状态\r\n        initState(vm)\r\n    }\r\n}\r\n","import { initMixn } from \"./init\";\r\n\r\nfunction Vue(options) {\r\n    // console.log(options)\r\n    this._init(options)\r\n}\r\ninitMixn(Vue)\r\nexport default Vue;"],"names":["observer","data","_typeof","Observer","value","_classCallCheck","walk","_createClass","key","keys","Object","i","length","defineReactive","defineProperty","get","console","log","set","newValue","oldValue","initState","vm","opts","$options","props","initData","watch","computed","methods","_data","call","initMixn","Vue","prototype","_init","options"],"mappings":"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"}